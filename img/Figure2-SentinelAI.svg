<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="900" viewBox="0 0 1600 900">
  <defs>
    <marker id="arrow" markerWidth="6" markerHeight="6" refX="5.2" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M 0 0 L 6 3 L 0 6 z" fill="#111827" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect x="0" y="0" width="1600" height="900" fill="#ffffff" />
  
  <!-- Title -->
  <text x="800.0" y="80" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="34" font-weight="700" fill="#111827">Figure 2. IDX Agent Correlation Logic</text>

  <!-- Group: The Filter Pipeline Background -->
  <rect x="560" y="240" width="480" height="340" rx="22" ry="22" fill="#F9FAFB" stroke="#E5E7EB" stroke-width="2" />
  <text x="1060" y="270" text-anchor="start" font-family="Inter, Arial, sans-serif" font-size="14" font-weight="600" fill="#6B7280">Candidate Filtering</text>

  <!-- Step 1: Input -->
  <rect x="600" y="130" width="400" height="80" rx="18" ry="18" fill="#ffffff" stroke="#111827" stroke-width="3" />
  <text x="800" y="165" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="20" font-weight="700" fill="#111827">Incoming EIDO</text>
  <text x="800" y="190" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="16" font-weight="400" fill="#111827">Timestamp, Location, Description</text>
  
  <!-- Arrow 1 -->
  <line x1="800" y1="210" x2="800" y2="280" stroke="#111827" stroke-width="3" marker-end="url(#arrow)" />

  <!-- Step 2: Hard Filter -->
  <rect x="600" y="280" width="400" height="100" rx="18" ry="18" fill="#ffffff" stroke="#111827" stroke-width="3" />
  <text x="800" y="320" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="20" font-weight="700" fill="#111827">Hard Filter</text>
  <text x="800" y="350" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="16" font-weight="400" fill="#111827">Time Window (&lt; 6h) AND Proximity (&lt; 10km)</text>

  <!-- Arrow 2 (Pass) -->
  <line x1="800" y1="380" x2="800" y2="440" stroke="#111827" stroke-width="3" marker-end="url(#arrow)" />

  <!-- Step 3: Soft Filter -->
  <rect x="600" y="440" width="400" height="100" rx="18" ry="18" fill="#ffffff" stroke="#111827" stroke-width="3" />
  <text x="800" y="480" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="20" font-weight="700" fill="#111827">Soft Filter</text>
  <text x="800" y="510" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="16" font-weight="400" fill="#111827">Keyword Overlap / Semantic Similarity</text>

  <!-- Arrow 3 (Pass to LLM) -->
  <line x1="800" y1="540" x2="800" y2="620" stroke="#111827" stroke-width="3" marker-end="url(#arrow)" />
  <text x="810" y="580" text-anchor="start" font-family="Inter, Arial, sans-serif" font-size="14" font-weight="600" fill="#111827">Candidates Found</text>

  <!-- Step 4: LLM -->
  <rect x="600" y="620" width="400" height="100" rx="18" ry="18" fill="#ffffff" stroke="#111827" stroke-width="3" />
  <text x="800" y="660" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="20" font-weight="700" fill="#111827">LLM Adjudication</text>
  <text x="800" y="690" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="16" font-weight="400" fill="#111827">Analyze EIDO against Candidate List</text>

  <!-- Left Outcome: New Incident -->
  <rect x="200" y="760" width="350" height="100" rx="18" ry="18" fill="#F3F4F6" stroke="#111827" stroke-width="3" stroke-dasharray="8,8" />
  <text x="375" y="805" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="20" font-weight="700" fill="#111827">Create New Incident</text>
  <text x="375" y="835" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="16" font-weight="400" fill="#111827">Generate Name, Type, Tags</text>

  <!-- Right Outcome: Link -->
  <rect x="1050" y="760" width="350" height="100" rx="18" ry="18" fill="#ffffff" stroke="#111827" stroke-width="3" />
  <text x="1225" y="805" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="20" font-weight="700" fill="#111827">Link EIDO</text>
  <text x="1225" y="835" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="16" font-weight="400" fill="#111827">Associate with Existing Incident ID</text>

  <!-- Fail Paths (Lines to Left) -->
  <!-- From Hard Filter -->
  <line x1="600" y1="330" x2="375" y2="330" stroke="#111827" stroke-width="3" />
  <line x1="375" y1="330" x2="375" y2="750" stroke="#111827" stroke-width="3" marker-end="url(#arrow)" />
  <text x="450" y="320" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="14" font-weight="600" fill="#111827">No Match</text>

  <!-- From Soft Filter -->
  <line x1="600" y1="490" x2="420" y2="490" stroke="#111827" stroke-width="3" />
  <line x1="420" y1="490" x2="420" y2="750" stroke="#111827" stroke-width="3" marker-end="url(#arrow)" />
  <text x="480" y="480" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="14" font-weight="600" fill="#111827">Below Threshold</text>

  <!-- From LLM (Decision: NEW) -->
  <line x1="600" y1="670" x2="465" y2="670" stroke="#111827" stroke-width="3" />
  <line x1="465" y1="670" x2="465" y2="750" stroke="#111827" stroke-width="3" marker-end="url(#arrow)" />
  <text x="500" y="660" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="14" font-weight="600" fill="#111827">Decision: NEW</text>

  <!-- From LLM (Decision: MATCH) -->
  <line x1="800" y1="720" x2="800" y2="810" stroke="#111827" stroke-width="3" /> <!-- Down -->
  <line x1="800" y1="810" x2="1040" y2="810" stroke="#111827" stroke-width="3" marker-end="url(#arrow)" /> <!-- Right to box -->
  <text x="920" y="800" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="14" font-weight="600" fill="#111827">Decision: MATCH</text>

</svg>